<h1 class="text-centertitle mb-4">Trips</h1>

<div class="main-container ">
    <div class="container" id=search-form>
      <div class="row justify-content-center">
        <div class="col-sm-8 my-3" id=buttonsearch>
          <%= form_with url: passports_path, method: :get, class: "d-flex" do %>
            <%= text_field_tag :query, params[:query], class: "form-control mx-4", placeholder: "Search for a Passport✈️" %>
            <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>

      <%= link_to "Create New Passport", new_passport_path, class: "btn btn-success" %>

      <div class="row justify-content-center">
        <div class="col-sm-8">
          <div id="passports">
            <% if params[:query].present? %>
              <% if @passports.any? %>
                <p><%= @passports.count %> result(s) found.</p>
              <% else %>
                <em>Sorry, no passports found.</em>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

  <div class="cards-map">
    <div class="left-section">
      <div class="passports" id="greencard">
        <% @passports.each do |passport| %>
          <div class="passport">
            <div class="img">
              <%= cl_image_tag passport.photos.first.key, height: 200, width: 300, crop: :fill %>
            </div>
            <div class="content">
              <span class="title"><%= passport.title %></span>
              <span class="text"><%= passport.description %></span>
            </div>
            <div class="bottom">
              <%= link_to "View More", passport_path(passport), class: "btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="right-section">
      <div class="map">
        <div style="width: 100%; height: 600px;"
          data-controller="map"
          data-map-markers-value="<%= @markers.to_json %>"
          data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>" id="mapcont">
        </div>
      </div>
    </div>
  </div>
</div>
